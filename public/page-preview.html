<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preview - CDM86</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0f172a;
            color: #fff;
        }

        .preview-header {
            background: #1e293b;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .preview-header h1 {
            font-size: 1.25rem;
            color: #fbbf24;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            background: #2563eb;
            color: #fff;
        }

        .page-content {
            max-width: 1400px;
            margin: 2rem auto;
            background: #fff;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .page-section {
            padding: 4rem 2rem;
        }

        @keyframes walk {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>
    <div class="preview-header">
        <h1><i class="fas fa-eye"></i> Preview Mode</h1>
        <button class="btn" onclick="window.close()">
            <i class="fas fa-times"></i> Chiudi Preview
        </button>
    </div>

    <div class="page-content" id="pageContent">
        <!-- Sections will be rendered here -->
    </div>

    <script>
        const pageData = JSON.parse(localStorage.getItem('pagePreview') || '{"sections":[]}');
        const pageContent = document.getElementById('pageContent');

        if (pageData.sections.length === 0) {
            pageContent.innerHTML = '<div style="padding: 4rem; text-align: center; color: #64748b;"><i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 1rem; display: block;"></i><p>Nessuna sezione da visualizzare</p></div>';
        } else {
            pageData.sections.forEach(section => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'page-section';
                sectionDiv.innerHTML = getSectionHTML(section);
                pageContent.appendChild(sectionDiv);
            });
        }

        function getSectionHTML(section) {
            const templates = {
                hero: `
                    <div style="background: ${section.data.background}; color: white; padding: 4rem 2rem; text-align: center; border-radius: 0.5rem;">
                        <h1 style="font-size: 3rem; margin-bottom: 1rem; font-weight: 800;">${section.data.title}</h1>
                        <h2 style="font-size: 1.5rem; color: #fbbf24; margin-bottom: 1rem; font-weight: 600;">${section.data.subtitle}</h2>
                        <p style="font-size: 1.25rem; margin-bottom: 2rem; opacity: 0.95; max-width: 800px; margin-left: auto; margin-right: auto;">${section.data.text}</p>
                        <a href="${section.data.ctaLink}" style="background: #fbbf24; color: #1e3a8a; padding: 1rem 2rem; border-radius: 2rem; font-weight: 700; font-size: 1.125rem; text-decoration: none; display: inline-block;">${section.data.ctaText}</a>
                    </div>
                `,
                'text-image': `
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; align-items: center; max-width: 1200px; margin: 0 auto;">
                        <div ${section.data.imagePosition === 'right' ? '' : 'style="order: 2;"'}>
                            <h2 style="font-size: 2rem; margin-bottom: 1rem; color: #2563eb; font-weight: 700;">${section.data.title}</h2>
                            <p style="font-size: 1.125rem; line-height: 1.7; color: #475569;">${section.data.text}</p>
                        </div>
                        <div ${section.data.imagePosition === 'right' ? 'style="order: 2;"' : ''}>
                            <img src="${section.data.imageUrl}" style="width: 100%; border-radius: 0.75rem; box-shadow: 0 10px 30px rgba(0,0,0,0.1);" alt="Section image">
                        </div>
                    </div>
                `,
                'cards-3': `
                    <div style="max-width: 1200px; margin: 0 auto;">
                        <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 3rem; color: #2563eb; font-weight: 800;">${section.data.title}</h2>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem;">
                            ${(section.data.cards || []).map(card => `
                                <div style="background: linear-gradient(135deg, #fbbf24, #f59e0b); padding: 2rem; border-radius: 1rem; text-align: center; color: #1e3a8a; box-shadow: 0 10px 30px rgba(251,191,36,0.3);">
                                    <i class="fas ${card.icon}" style="font-size: 2.5rem; margin-bottom: 1rem; display: block;"></i>
                                    <h3 style="font-size: 1.5rem; margin-bottom: 0.75rem; font-weight: 700;">${card.title}</h3>
                                    <p style="font-size: 1rem; line-height: 1.6;">${card.text}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `,
                'cards-4': `
                    <div style="max-width: 1200px; margin: 0 auto;">
                        <h2 style="text-align: center; font-size: 2.5rem; margin-bottom: 3rem; color: #2563eb; font-weight: 800;">${section.data.title}</h2>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.5rem;">
                            ${(section.data.cards || []).map(card => `
                                <div style="background: #fff; border: 2px solid #e2e8f0; padding: 1.5rem; border-radius: 0.75rem; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05);">
                                    <i class="fas ${card.icon}" style="font-size: 2rem; color: #fbbf24; margin-bottom: 1rem; display: block;"></i>
                                    <h4 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: #1e293b; font-weight: 600;">${card.title}</h4>
                                    <p style="font-size: 0.9rem; color: #64748b; line-height: 1.5;">${card.text}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `,
                stats: `
                    <div style="max-width: 1000px; margin: 0 auto;">
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem;">
                            ${(section.data.stats || []).map(stat => `
                                <div style="text-align: center; padding: 2rem; background: rgba(37, 99, 235, 0.05); border-radius: 0.75rem; border: 1px solid rgba(37, 99, 235, 0.1);">
                                    <div style="font-size: 3rem; font-weight: 800; color: #fbbf24; margin-bottom: 0.5rem;">${stat.number}</div>
                                    <div style="font-size: 1.125rem; color: #475569; font-weight: 500;">${stat.label}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `,
                cta: `
                    <div style="background: ${section.data.background}; color: white; padding: 4rem 2rem; text-align: center; border-radius: 0.5rem; max-width: 900px; margin: 0 auto;">
                        <p style="font-size: 1.75rem; margin-bottom: 2rem; font-weight: 600;">${section.data.text}</p>
                        <a href="${section.data.ctaLink}" style="background: #fbbf24; color: #1e3a8a; padding: 1.25rem 3rem; border-radius: 2rem; font-weight: 700; font-size: 1.25rem; text-decoration: none; display: inline-block; box-shadow: 0 10px 30px rgba(251,191,36,0.4);">${section.data.ctaText}</a>
                    </div>
                `,
                animation: `
                    <div style="text-align: center; padding: 3rem; background: linear-gradient(135deg, #2563eb, #1d4ed8); border-radius: 0.5rem; color: white; max-width: 800px; margin: 0 auto;">
                        <h2 style="font-size: 2rem; margin-bottom: 1rem; font-weight: 700;">${section.data.title}</h2>
                        <p style="font-size: 1.125rem; margin-bottom: 2rem; opacity: 0.95;">${section.data.description}</p>
                        <div style="font-size: 4rem; animation: walk 1s infinite;">ðŸš¶</div>
                    </div>
                `
            };

            return templates[section.type] || '<p style="text-align: center; color: #64748b;">Tipo sezione non supportato</p>';
        }
    </script>
</body>
</html>
